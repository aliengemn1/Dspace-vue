import{r as b,c as u,o as Ce,k as o,m as e,n as c,j as ve,t as i,x as A,A as d,p as Z,I as Me,F,u as H,J as Be,P as Ve,z as Ie,y as ze,l as s,B as Ae,q as Fe}from"./vue-vendor-yx-9Zx-6.js";import{u as He}from"./i18n-CZH2hkgn.js";import{B as $e}from"./Breadcrumb-Dz3t5IP6.js";import{M as Se}from"./MediaViewer-S0CEBgFY.js";import{u as v,i as he,e as L,s as De}from"./dspace-CvDgOV_T.js";import{_ as je}from"./index-C9hMAXH0.js";import"./ImageSlider-D-pIzYi2.js";import"./utils-B9ygI19o.js";const Le={class:"item-view",role:"main"},Ne={class:"breadcrumb-section","aria-label":"Breadcrumb"},We={class:"container"},Ee={key:0,class:"loading-container",role:"status","aria-live":"polite"},Pe={class:"loading-content"},Re={key:1,class:"error-container",role:"alert"},Ue={class:"error-content"},qe={key:2,class:"item-content"},Ke={class:"item-header"},Oe={class:"container"},Ge={class:"header-grid"},Je={class:"header-thumbnail"},Ze=["tabindex","role","aria-label"],Qe=["src","alt"],Xe={key:1,class:"thumbnail-placeholder"},Ye={key:0,width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","aria-hidden":"true"},Te={key:1,width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","aria-hidden":"true"},et={key:2,width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","aria-hidden":"true"},tt={key:2,class:"thumbnail-overlay"},at={class:"thumbnail-actions"},lt=["aria-label"],it=["aria-label"],st={class:"header-info"},ot={class:"item-title"},nt={key:0,class:"item-authors",role:"list","aria-label":"Authors"},rt={class:"authors-list"},dt={key:0,"aria-hidden":"true"},ut={class:"item-meta-row"},ct={key:0,class:"meta-chip"},vt={key:1,class:"meta-chip"},ht={key:2,class:"meta-chip"},ft={class:"item-stats"},pt={class:"stat-badge"},gt={class:"stat-value"},wt={class:"stat-label"},bt={class:"stat-badge"},kt={class:"stat-value"},yt={class:"stat-label"},mt={class:"header-actions"},_t=["aria-label"],xt=["aria-label"],Ct={class:"item-main-content"},Mt={class:"container"},Bt={key:0,class:"content-section file-viewer-section","aria-label":"File Viewer"},Vt={class:"section-header"},It={class:"section-title"},zt=["aria-label"],At={class:"viewer-content"},Ft={key:1,class:"content-section abstract-section","aria-labelledby":"abstract-title"},Ht={id:"abstract-title",class:"section-title"},$t={class:"abstract-text"},St={key:2,class:"content-section subjects-section","aria-labelledby":"subjects-title"},Dt={id:"subjects-title",class:"section-title"},jt={class:"subjects-list",role:"list"},Lt={key:3,class:"content-section files-section","aria-labelledby":"files-title"},Nt={id:"files-title",class:"section-title"},Wt={class:"files-grid",role:"list"},Et={key:0,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},Pt={key:1,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},Rt={key:2,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},Ut={key:3,width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},qt={class:"file-info"},Kt={class:"file-name"},Ot={class:"file-meta"},Gt={class:"file-type"},Jt={class:"file-size"},Zt={class:"file-actions"},Qt=["onClick","aria-label"],Xt={class:"btn-text"},Yt=["onClick","aria-label"],Tt={class:"btn-text"},ea={class:"details-grid"},ta={key:0,class:"content-section identifiers-section","aria-labelledby":"identifiers-title"},aa={id:"identifiers-title",class:"section-title"},la={class:"identifiers-list"},ia={class:"identifier-label"},sa={class:"identifier-value"},oa=["href"],na={key:1},ra={key:1,class:"content-section details-section","aria-labelledby":"details-title"},da={id:"details-title",class:"section-title"},ua={class:"details-list"},ca={class:"detail-label"},va={class:"detail-value"},ha={class:"content-section citation-section","aria-labelledby":"citation-title"},fa={id:"citation-title",class:"section-title"},pa={class:"citation-box"},ga={class:"citation-text"},wa=["aria-label"],ba={__name:"ItemView",setup(ka){const Q=Be(),fe=Ie(),{t:x,locale:pe}=He(),r=b(null),p=b([]),N=b(!0),$=b(null),k=b(null),S=b(!1),W=b(!1),E=b(!1),P=b({views:0,downloads:0}),R=b(null),U=u(()=>p.value.filter(a=>a.mimeType==="application/pdf")),q=u(()=>p.value.filter(a=>{var t;return(t=a.mimeType)==null?void 0:t.startsWith("image/")})),K=u(()=>p.value.filter(a=>{var t;return(t=a.mimeType)==null?void 0:t.startsWith("video/")})),C=u(()=>U.value.length>0?U.value[0]:q.value.length>0?q.value[0]:K.value.length>0?K.value[0]:p.value[0]||null),y=u(()=>U.value.length>0||q.value.length>0||K.value.length>0),ge=u(()=>[{label:x("nav.home"),path:"/"},{label:x("nav.browse"),path:"/browse"},{label:B.value||x("item.title"),path:null}]),X=u(()=>{var t;if(!((t=r.value)!=null&&t.metadata))return[];const a=r.value.metadata;return v.getMetadataValue(a,"dc.subject",!0)||[]}),Y=u(()=>{var t;if(!((t=r.value)!=null&&t.metadata))return[];const a=r.value.metadata;return[{key:"uri",label:"Handle",labelAr:"المعرف الدائم",value:v.getMetadataValue(a,"dc.identifier.uri")},{key:"doi",label:"DOI",labelAr:"معرف DOI",value:v.getMetadataValue(a,"dc.identifier.doi")},{key:"isbn",label:"ISBN",labelAr:"رقم ISBN",value:v.getMetadataValue(a,"dc.identifier.isbn")},{key:"issn",label:"ISSN",labelAr:"رقم ISSN",value:v.getMetadataValue(a,"dc.identifier.issn")}].filter(w=>w.value)}),T=u(()=>{var t;if(!((t=r.value)!=null&&t.metadata))return[];const a=r.value.metadata;return[{key:"type",label:x("item.fields.type"),labelAr:"النوع",value:v.getMetadataValue(a,"dc.type")},{key:"language",label:x("item.fields.language"),labelAr:"اللغة",value:v.getMetadataValue(a,"dc.language.iso")},{key:"publisher",label:x("item.fields.publisher"),labelAr:"الناشر",value:v.getMetadataValue(a,"dc.publisher")},{key:"rights",label:x("item.fields.rights"),labelAr:"الحقوق",value:v.getMetadataValue(a,"dc.rights")},{key:"format",label:"Format",labelAr:"الصيغة",value:v.getMetadataValue(a,"dc.format")}].filter(w=>w.value)}),B=u(()=>{var a;return(a=r.value)!=null&&a.metadata&&v.getMetadataValue(r.value.metadata,"dc.title")||""}),V=u(()=>{var a;return(a=r.value)!=null&&a.metadata?v.getMetadataValue(r.value.metadata,"dc.contributor.author",!0)||[]:[]}),ee=u(()=>{var a;return(a=r.value)!=null&&a.metadata&&v.getMetadataValue(r.value.metadata,"dc.description.abstract")||""}),M=u(()=>{var a;return(a=r.value)!=null&&a.metadata&&v.getMetadataValue(r.value.metadata,"dc.type")||""}),D=u(()=>{var a;return(a=r.value)!=null&&a.metadata&&v.getMetadataValue(r.value.metadata,"dc.date.issued")||""}),j=u(()=>{var a;return(a=r.value)!=null&&a.metadata&&v.getMetadataValue(r.value.metadata,"dc.publisher")||""}),te={"رسالة ماجستير":"#006C35","رسالة دكتوراه":"#1B4D3E","بحث علمي":"#17A2B8",كتاب:"#C8A415",مقال:"#6F42C1",تقرير:"#FD7E14",default:"#757575"},we=u(()=>te[M.value]||te.default),n=u(()=>pe.value==="ar");async function ae(){var a,t,w,l;N.value=!0,$.value=null;try{const h=Q.params.id;console.log("Loading item:",h);const I=await he.getById(h);console.log("Item data received:",I),r.value=I;try{const g=await he.getBundles(h);if(console.log("Bundles response:",g),(a=g._embedded)!=null&&a.bundles)for(const m of g._embedded.bundles){if(m.name==="THUMBNAIL"){const J=m.uuid||m.id;try{const _=await L.getByBundle(J);if(((w=(t=_._embedded)==null?void 0:t.bitstreams)==null?void 0:w.length)>0){const f=_._embedded.bitstreams[0];R.value=L.getContentUrl(f.uuid||f.id)}}catch(_){console.warn("Could not load thumbnail:",_)}}if(m.name==="ORIGINAL"){const J=m.uuid||m.id,_=await L.getByBundle(J);console.log("Bitstreams response:",_),(l=_._embedded)!=null&&l.bitstreams&&(p.value=_._embedded.bitstreams.map(f=>{var oe,ne,re,de;let z="application/octet-stream";if((re=(ne=(oe=f.metadata)==null?void 0:oe["dc.format.mimetype"])==null?void 0:ne[0])!=null&&re.value)z=f.metadata["dc.format.mimetype"][0].value;else if(f.mimeType)z=f.mimeType;else if((de=f.format)!=null&&de.mimetype)z=f.format.mimetype;else if(f.name){const ue=f.name.toLowerCase().split(".").pop(),ce={pdf:"application/pdf",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",mp4:"video/mp4",webm:"video/webm",mp3:"audio/mpeg",wav:"audio/wav",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};ce[ue]&&(z=ce[ue])}return{id:f.uuid||f.id,name:f.name,sizeBytes:f.sizeBytes,mimeType:z}}))}}}catch(g){console.warn("Could not load bundles:",g)}try{const g=await De.getItemStats(h);P.value=g}catch(g){console.warn("Could not load statistics:",g)}}catch(h){console.error("Error loading item:",h),$.value=h.message||"فشل تحميل بيانات العنصر",r.value=null,p.value=[]}finally{N.value=!1,y.value&&(k.value=C.value)}}function be(a){if(a===0)return"0 Bytes";const t=1024,w=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(a)/Math.log(t));return parseFloat((a/Math.pow(t,l)).toFixed(2))+" "+w[l]}function O(a){const t=L.getContentUrl(a.id);window.open(t,"_blank")}function le(a,t="link"){navigator.clipboard.writeText(a),t==="citation"?(W.value=!0,setTimeout(()=>W.value=!1,2e3)):(E.value=!0,setTimeout(()=>E.value=!1,2e3))}function G(a){k.value=a,S.value=!0,Ve(()=>{const t=document.querySelector(".file-viewer-section");t&&t.scrollIntoView({behavior:"smooth",block:"start"})})}function ie(){S.value=!1}function se(){C.value&&G(C.value)}function ke(){fe.push(`/item/${Q.params.id}/full`)}function ye(a){return a==="application/pdf"?"pdf":a!=null&&a.startsWith("image/")?"image":a!=null&&a.startsWith("video/")?"video":a!=null&&a.includes("word")?"word":a!=null&&a.includes("excel")||a!=null&&a.includes("spreadsheet")?"excel":"file"}function me(a){return a==="application/pdf"?"PDF":a!=null&&a.startsWith("image/")?n.value?"صورة":"Image":a!=null&&a.startsWith("video/")?n.value?"فيديو":"Video":a!=null&&a.includes("word")?"Word":a!=null&&a.includes("excel")?"Excel":n.value?"ملف":"File"}function _e(a){return a==="application/pdf"||(a==null?void 0:a.startsWith("image/"))||(a==null?void 0:a.startsWith("video/"))}function xe(a,t){(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),t())}return Ce(()=>{ae()}),(a,t)=>{const w=ze("router-link");return s(),o("div",Le,[e("nav",Ne,[e("div",We,[ve($e,{items:ge.value},null,8,["items"])])]),N.value?(s(),o("div",Ee,[e("div",Pe,[t[8]||(t[8]=e("div",{class:"spinner spinner-lg","aria-hidden":"true"},null,-1)),e("p",null,i(a.$t("common.loading")),1)])])):$.value&&!r.value?(s(),o("div",Re,[e("div",Ue,[t[10]||(t[10]=A('<div class="error-icon" aria-hidden="true" data-v-fd85c279><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-fd85c279><circle cx="12" cy="12" r="10" data-v-fd85c279></circle><line x1="12" y1="8" x2="12" y2="12" data-v-fd85c279></line><line x1="12" y1="16" x2="12.01" y2="16" data-v-fd85c279></line></svg></div>',1)),e("h2",null,i(n.value?"حدث خطأ":"An error occurred"),1),e("p",null,i($.value),1),e("button",{class:"btn btn-primary",onClick:ae},[t[9]||(t[9]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("polyline",{points:"23 4 23 10 17 10"}),e("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1)),d(" "+i(a.$t("common.retry")),1)])])])):r.value?(s(),o("article",qe,[e("header",Ke,[e("div",Oe,[e("div",Ge,[e("div",Je,[e("div",{class:Z(["thumbnail-wrapper",{"has-preview":y.value}]),onClick:t[0]||(t[0]=l=>y.value&&se()),onKeydown:t[1]||(t[1]=l=>y.value&&xe(l,se)),tabindex:y.value?0:-1,role:y.value?"button":"img","aria-label":y.value?n.value?"اضغط لعرض الملف":"Click to preview file":B.value},[R.value?(s(),o("img",{key:0,src:R.value,alt:B.value,class:"thumbnail-image",loading:"lazy"},null,8,Qe)):(s(),o("div",Xe,[M.value.includes("كتاب")||M.value.toLowerCase().includes("book")?(s(),o("svg",Ye,[...t[11]||(t[11]=[e("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},null,-1),e("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},null,-1)])])):M.value.includes("رسالة")||M.value.toLowerCase().includes("thesis")?(s(),o("svg",Te,[...t[12]||(t[12]=[e("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"},null,-1),e("path",{d:"M6 12v5c0 2 2 3 6 3s6-1 6-3v-5"},null,-1)])])):(s(),o("svg",et,[...t[13]||(t[13]=[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},null,-1),e("polyline",{points:"14 2 14 8 20 8"},null,-1),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"},null,-1),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"},null,-1)])]))])),y.value?(s(),o("div",tt,[t[14]||(t[14]=e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)),e("span",null,i(n.value?"معاينة":"Preview"),1)])):c("",!0),M.value?(s(),o("span",{key:3,class:"type-badge",style:Me({backgroundColor:we.value})},i(M.value),5)):c("",!0)],42,Ze),e("div",at,[C.value?(s(),o("button",{key:0,class:"btn btn-primary btn-action",onClick:t[2]||(t[2]=l=>G(C.value)),"aria-label":n.value?"عرض الملف":"View file"},[t[15]||(t[15]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)),d(" "+i(n.value?"عرض":"View"),1)],8,lt)):c("",!0),C.value?(s(),o("button",{key:1,class:"btn btn-success btn-action",onClick:t[3]||(t[3]=l=>O(C.value)),"aria-label":n.value?"تحميل الملف":"Download file"},[t[16]||(t[16]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),d(" "+i(n.value?"تحميل":"Download"),1)],8,it)):c("",!0)])]),e("div",st,[e("h1",ot,i(B.value),1),V.value.length?(s(),o("div",nt,[t[17]||(t[17]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})],-1)),e("div",rt,[(s(!0),o(F,null,H(V.value,(l,h)=>(s(),o("span",{key:h,class:"author-name",role:"listitem"},[d(i(l),1),h<V.value.length-1?(s(),o("span",dt,"، ")):c("",!0)]))),128))])])):c("",!0),e("div",ut,[D.value?(s(),o("div",ct,[t[18]||(t[18]=A('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" data-v-fd85c279><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-fd85c279></rect><line x1="16" y1="2" x2="16" y2="6" data-v-fd85c279></line><line x1="8" y1="2" x2="8" y2="6" data-v-fd85c279></line><line x1="3" y1="10" x2="21" y2="10" data-v-fd85c279></line></svg>',1)),e("span",null,i(D.value),1)])):c("",!0),j.value?(s(),o("div",vt,[t[19]||(t[19]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),e("span",null,i(j.value),1)])):c("",!0),p.value.length>0?(s(),o("div",ht,[t[20]||(t[20]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})],-1)),e("span",null,i(p.value.length)+" "+i(p.value.length===1?n.value?"ملف":"file":n.value?"ملفات":"files"),1)])):c("",!0)]),e("div",ft,[e("div",pt,[t[21]||(t[21]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)),e("span",gt,i(P.value.views.toLocaleString("ar-SA")),1),e("span",wt,i(n.value?"مشاهدة":"views"),1)]),e("div",bt,[t[22]||(t[22]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),e("span",kt,i(P.value.downloads.toLocaleString("ar-SA")),1),e("span",yt,i(n.value?"تحميل":"downloads"),1)])]),e("div",mt,[e("button",{class:"btn btn-outline-primary",onClick:t[4]||(t[4]=l=>le(a.window.location.href,"link")),"aria-label":n.value?"نسخ الرابط":"Copy link"},[t[23]||(t[23]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1)),d(" "+i(E.value?n.value?"تم النسخ!":"Copied!":n.value?"نسخ الرابط":"Copy Link"),1)],8,_t),e("button",{class:"btn btn-outline-secondary",onClick:ke,"aria-label":n.value?"عرض التفاصيل الكاملة":"View full details"},[t[24]||(t[24]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)),d(" "+i(n.value?"التفاصيل الكاملة":"Full Details"),1)],8,xt)])])])])]),e("div",Ct,[e("div",Mt,[S.value&&k.value?(s(),o("section",Bt,[e("div",Vt,[e("h2",It,[t[25]||(t[25]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)),d(" "+i(n.value?"عرض الملف":"File Viewer")+": "+i(k.value.name),1)]),e("button",{class:"btn btn-close-viewer",onClick:ie,"aria-label":n.value?"إغلاق العرض":"Close viewer"},[t[26]||(t[26]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),d(" "+i(n.value?"إغلاق":"Close"),1)],8,zt)]),e("div",At,[ve(Se,{files:p.value,"selected-file":k.value,onClose:ie,onDownload:t[5]||(t[5]=l=>O(k.value)),onSelectFile:t[6]||(t[6]=l=>k.value=l)},null,8,["files","selected-file"])])])):c("",!0),ee.value?(s(),o("section",Ft,[e("h2",Ht,[t[27]||(t[27]=A('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" data-v-fd85c279><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-fd85c279></path><polyline points="14 2 14 8 20 8" data-v-fd85c279></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-fd85c279></line><line x1="16" y1="17" x2="8" y2="17" data-v-fd85c279></line></svg>',1)),d(" "+i(n.value?"الملخص":"Abstract"),1)]),e("p",$t,i(ee.value),1)])):c("",!0),X.value.length>0?(s(),o("section",St,[e("h2",Dt,[t[28]||(t[28]=A('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" data-v-fd85c279><line x1="4" y1="9" x2="20" y2="9" data-v-fd85c279></line><line x1="4" y1="15" x2="20" y2="15" data-v-fd85c279></line><line x1="10" y1="3" x2="8" y2="21" data-v-fd85c279></line><line x1="16" y1="3" x2="14" y2="21" data-v-fd85c279></line></svg>',1)),d(" "+i(n.value?"الموضوعات":"Subjects"),1)]),e("div",jt,[(s(!0),o(F,null,H(X.value,(l,h)=>(s(),Ae(w,{key:h,to:`/search?q=${encodeURIComponent(l)}`,class:"subject-tag",role:"listitem"},{default:Fe(()=>[d(i(l),1)]),_:2},1032,["to"]))),128))])])):c("",!0),p.value.length>0?(s(),o("section",Lt,[e("h2",Nt,[t[29]||(t[29]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})],-1)),d(" "+i(n.value?"الملفات المتاحة":"Available Files")+" ("+i(p.value.length)+") ",1)]),e("div",Wt,[(s(!0),o(F,null,H(p.value,l=>{var h,I,g;return s(),o("div",{key:l.id,class:Z(["file-card",{"is-selected":((h=k.value)==null?void 0:h.id)===l.id&&S.value}]),role:"listitem"},[e("div",{class:Z(["file-icon",`file-icon-${ye(l.mimeType)}`]),"aria-hidden":"true"},[l.mimeType==="application/pdf"?(s(),o("svg",Et,[...t[30]||(t[30]=[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},null,-1),e("polyline",{points:"14 2 14 8 20 8"},null,-1),e("path",{d:"M9 13h2v4H9z"},null,-1),e("path",{d:"M13 13h2v4h-2z"},null,-1)])])):(I=l.mimeType)!=null&&I.startsWith("image/")?(s(),o("svg",Pt,[...t[31]||(t[31]=[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},null,-1),e("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),e("polyline",{points:"21 15 16 10 5 21"},null,-1)])])):(g=l.mimeType)!=null&&g.startsWith("video/")?(s(),o("svg",Rt,[...t[32]||(t[32]=[e("polygon",{points:"23 7 16 12 23 17 23 7"},null,-1),e("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},null,-1)])])):(s(),o("svg",Ut,[...t[33]||(t[33]=[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},null,-1),e("polyline",{points:"14 2 14 8 20 8"},null,-1)])]))],2),e("div",qt,[e("span",Kt,i(l.name),1),e("div",Ot,[e("span",Gt,i(me(l.mimeType)),1),t[34]||(t[34]=e("span",{class:"file-separator"},"•",-1)),e("span",Jt,i(be(l.sizeBytes)),1)])]),e("div",Zt,[_e(l.mimeType)?(s(),o("button",{key:0,class:"btn btn-view-file",onClick:m=>G(l),"aria-label":`${n.value?"عرض":"View"} ${l.name}`},[t[35]||(t[35]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)),e("span",Xt,i(n.value?"عرض":"View"),1)],8,Qt)):c("",!0),e("button",{class:"btn btn-download-file",onClick:m=>O(l),"aria-label":`${n.value?"تحميل":"Download"} ${l.name}`},[t[36]||(t[36]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),e("span",Tt,i(n.value?"تحميل":"Download"),1)],8,Yt)])],2)}),128))])])):c("",!0),e("div",ea,[Y.value.length>0?(s(),o("section",ta,[e("h2",aa,[t[37]||(t[37]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1)),d(" "+i(n.value?"المعرفات":"Identifiers"),1)]),e("dl",la,[(s(!0),o(F,null,H(Y.value,l=>(s(),o("div",{key:l.key,class:"identifier-item"},[e("dt",ia,i(n.value?l.labelAr:l.label),1),e("dd",sa,[l.key==="uri"||l.key==="doi"?(s(),o("a",{key:0,href:l.key==="doi"?`https://doi.org/${l.value}`:l.value,target:"_blank",rel:"noopener"},i(l.value),9,oa)):(s(),o("span",na,i(l.value),1))])]))),128))])])):c("",!0),T.value.length>0?(s(),o("section",ra,[e("h2",da,[t[38]||(t[38]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)),d(" "+i(n.value?"التفاصيل":"Details"),1)]),e("dl",ua,[(s(!0),o(F,null,H(T.value,l=>(s(),o("div",{key:l.key,class:"detail-item"},[e("dt",ca,i(n.value?l.labelAr:l.label),1),e("dd",va,i(l.value),1)]))),128))])])):c("",!0),e("section",ha,[e("h2",fa,[t[39]||(t[39]=A('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" data-v-fd85c279><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6" data-v-fd85c279></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18" data-v-fd85c279></path><path d="M4 22h16" data-v-fd85c279></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22" data-v-fd85c279></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22" data-v-fd85c279></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z" data-v-fd85c279></path></svg>',1)),d(" "+i(n.value?"الاستشهاد":"Citation"),1)]),e("div",pa,[e("p",ga,[d(i(V.value.join("، "))+" ("+i(D.value)+"). ",1),e("em",null,i(B.value),1),d(". "+i(j.value)+". ",1)]),e("button",{class:"btn btn-copy-citation",onClick:t[7]||(t[7]=l=>le(`${V.value.join("، ")} (${D.value}). ${B.value}. ${j.value}.`,"citation")),"aria-label":n.value?"نسخ الاستشهاد":"Copy citation"},[t[40]||(t[40]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)),d(" "+i(W.value?n.value?"تم النسخ!":"Copied!":n.value?"نسخ الاستشهاد":"Copy Citation"),1)],8,wa)])])])])])])):c("",!0)])}}},Ia=je(ba,[["__scopeId","data-v-fd85c279"]]);export{Ia as default};
