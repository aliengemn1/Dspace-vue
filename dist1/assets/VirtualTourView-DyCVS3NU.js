import{r as b,o as G,k as n,l as s,m as t,t as i,O as r,F as B,u as H,p as V,x as j,I as q,c as C,w as W,A as R,j as D,n as f,q as F,v as P,z as O,b as U,B as L,Q,J as Y}from"./vue-vendor-yx-9Zx-6.js";import{_ as z,a as K}from"./index-C9hMAXH0.js";import{u as N}from"./i18n-CZH2hkgn.js";import{i as Z}from"./dspace-CvDgOV_T.js";import{P as X,I as tt,V as et}from"./ImageSlider-D-pIzYi2.js";import"./utils-B9ygI19o.js";const st={class:"entrance-content"},it={class:"entrance-header"},nt={class:"entrance-title"},ot={class:"entrance-subtitle"},lt={class:"entrance-stats"},at={class:"stat-item"},rt={class:"stat-label"},ct={class:"stat-item"},dt={class:"stat-label"},ut={class:"stat-item"},vt={class:"stat-label"},ht={class:"halls-section"},mt={class:"halls-title"},pt={class:"halls-grid"},yt=["onMouseenter","onClick"],kt=["innerHTML"],ft={class:"hall-info"},gt={class:"hall-name"},_t={class:"hall-name-en"},wt={class:"entrance-instructions"},bt={class:"instruction-item"},$t={class:"instruction-item"},xt={class:"instruction-item"},Ct={class:"particles"},Tt={__name:"VirtualEntrance",props:{locations:{type:Array,required:!0}},emits:["navigate"],setup(v,{emit:x}){const{t:l}=N(),T=x,y=b(!1),h=b(null),k={book:`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
  </svg>`,graduation:`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path d="M22 10v6M2 10l10-5 10 5-10 5z"/>
    <path d="M6 12v5c3 3 9 3 12 0v-5"/>
  </svg>`,newspaper:`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/>
    <path d="M18 14h-8M15 18h-5M10 6h8v4h-8z"/>
  </svg>`,scroll:`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path d="M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4"/>
    <path d="M19 17V5a2 2 0 0 0-2-2H4"/>
  </svg>`,video:`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/>
    <line x1="7" y1="2" x2="7" y2="22"/>
    <line x1="17" y1="2" x2="17" y2="22"/>
    <line x1="2" y1="12" x2="22" y2="12"/>
    <line x1="2" y1="7" x2="7" y2="7"/>
    <line x1="2" y1="17" x2="7" y2="17"/>
    <line x1="17" y1="17" x2="22" y2="17"/>
    <line x1="17" y1="7" x2="22" y2="7"/>
  </svg>`};function p(d){return k[d]||k.book}function g(d){T("navigate",d)}return G(()=>{setTimeout(()=>{y.value=!0},300)}),(d,o)=>(s(),n("div",{class:V(["virtual-entrance",{ready:y.value}])},[o[11]||(o[11]=t("div",{class:"entrance-background"},[t("div",{class:"bg-pattern"}),t("div",{class:"bg-gradient"})],-1)),t("div",st,[t("div",it,[o[6]||(o[6]=t("div",{class:"logo-container"},[t("img",{src:K,alt:"KFNL",class:"kfnl-logo"}),t("div",{class:"logo-glow"})],-1)),t("h1",nt,i(r(l)("virtualTour.welcomeTitle")),1),t("p",ot,i(r(l)("virtualTour.welcomeSubtitle")),1),t("div",lt,[t("div",at,[o[1]||(o[1]=t("span",{class:"stat-value"},"+500K",-1)),t("span",rt,i(r(l)("virtualTour.digitalItems")),1)]),o[4]||(o[4]=t("div",{class:"stat-divider"},null,-1)),t("div",ct,[o[2]||(o[2]=t("span",{class:"stat-value"},"5",-1)),t("span",dt,i(r(l)("virtualTour.virtualHalls")),1)]),o[5]||(o[5]=t("div",{class:"stat-divider"},null,-1)),t("div",ut,[o[3]||(o[3]=t("span",{class:"stat-value"},"24/7",-1)),t("span",vt,i(r(l)("virtualTour.available")),1)])])]),t("div",ht,[t("h2",mt,i(r(l)("virtualTour.chooseHall")),1),t("div",pt,[(s(!0),n(B,null,H(v.locations,c=>(s(),n("button",{key:c.id,class:V(["hall-card",{active:h.value===c.id}]),onMouseenter:m=>h.value=c.id,onMouseleave:o[0]||(o[0]=m=>h.value=null),onClick:m=>g(c.id)},[t("div",{class:"hall-icon",innerHTML:p(c.icon)},null,8,kt),t("div",ft,[t("h3",gt,i(c.name),1),t("p",_t,i(c.nameEn),1)]),o[7]||(o[7]=j('<div class="hall-arrow" data-v-41bda3fe><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-41bda3fe><line x1="5" y1="12" x2="19" y2="12" data-v-41bda3fe></line><polyline points="12 5 19 12 12 19" data-v-41bda3fe></polyline></svg></div><div class="hall-shine" data-v-41bda3fe></div>',2))],42,yt))),128))])]),t("div",wt,[t("div",bt,[o[8]||(o[8]=t("kbd",null,"M",-1)),t("span",null,i(r(l)("virtualTour.toggleMap")),1)]),t("div",$t,[o[9]||(o[9]=t("kbd",null,"G",-1)),t("span",null,i(r(l)("virtualTour.toggleGuide")),1)]),t("div",xt,[o[10]||(o[10]=t("kbd",null,"ESC",-1)),t("span",null,i(r(l)("virtualTour.goBack")),1)])])]),o[12]||(o[12]=t("div",{class:"decorative-pillars"},[t("div",{class:"pillar pillar-left"}),t("div",{class:"pillar pillar-right"})],-1)),t("div",Ct,[(s(),n(B,null,H(20,c=>t("div",{key:c,class:"particle",style:q({left:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*5}s`})},null,4)),64))])],2))}},Et=z(Tt,[["__scopeId","data-v-41bda3fe"]]),Mt={class:"virtual-hall"},Bt={class:"hall-header"},Ht={class:"hall-title-area"},Vt={class:"hall-title"},It={class:"hall-subtitle"},Lt={class:"hall-stats"},St={class:"items-count"},At={class:"shelves-nav"},Dt=["onClick"],Ft={class:"shelf-name"},Pt={class:"shelf-name-en"},zt={class:"hall-content"},Nt={key:0,class:"hall-loading"},qt={key:1,class:"bookshelf-container"},Rt={class:"shelf-title"},Gt={class:"shelf-count"},Kt={class:"virtual-shelf"},jt={class:"shelf-structure"},Wt={class:"shelf-books"},Ot=["onMouseenter","onClick"],Ut={class:"book-spine"},Jt={class:"book-title"},Qt={key:0,class:"empty-shelf"},Yt={key:0,class:"item-preview"},Zt={class:"preview-thumbnail"},Xt=["src","alt"],te={key:1,src:K,alt:"KFNL",class:"default-thumbnail"},ee={class:"preview-info"},se={class:"preview-title"},ie={key:0,class:"preview-author"},ne={key:1,class:"preview-type"},oe={class:"hall-info-panel"},le={class:"info-title"},ae={class:"info-description"},re={class:"info-features"},ce={class:"feature"},de={class:"feature"},ue={class:"feature"},ve={__name:"VirtualHall",props:{hall:{type:Object,required:!0}},emits:["back","view-item"],setup(v,{emit:x}){const{t:l,locale:T}=N(),y=v,h=x,k=b(!0),p=b([]),g=b(0),d=b(null),o={books:[{id:0,name:"الأدب والشعر",nameEn:"Literature & Poetry",color:"#006C35"},{id:1,name:"التاريخ",nameEn:"History",color:"#1B4D3E"},{id:2,name:"العلوم الإسلامية",nameEn:"Islamic Sciences",color:"#C8A415"},{id:3,name:"العلوم والتقنية",nameEn:"Science & Technology",color:"#17A2B8"}],theses:[{id:0,name:"رسائل الماجستير",nameEn:"Master Theses",color:"#006C35"},{id:1,name:"رسائل الدكتوراه",nameEn:"PhD Dissertations",color:"#1B4D3E"},{id:2,name:"أبحاث علمية",nameEn:"Scientific Research",color:"#6F42C1"}],periodicals:[{id:0,name:"المجلات العلمية",nameEn:"Scientific Journals",color:"#17A2B8"},{id:1,name:"الصحف",nameEn:"Newspapers",color:"#757575"},{id:2,name:"النشرات الدورية",nameEn:"Periodical Bulletins",color:"#C8A415"}],manuscripts:[{id:0,name:"المخطوطات الإسلامية",nameEn:"Islamic Manuscripts",color:"#C8A415"},{id:1,name:"المخطوطات التاريخية",nameEn:"Historical Manuscripts",color:"#8B4513"},{id:2,name:"الوثائق النادرة",nameEn:"Rare Documents",color:"#800020"}],media:[{id:0,name:"الصور والخرائط",nameEn:"Images & Maps",color:"#17A2B8"},{id:1,name:"التسجيلات الصوتية",nameEn:"Audio Recordings",color:"#6F42C1"},{id:2,name:"الفيديوهات",nameEn:"Videos",color:"#DC3545"}]},c=C(()=>o[y.hall.collection]||o.books),m=C(()=>c.value[g.value]);async function $(){k.value=!0;try{const u=await Z.getRecent(12);p.value=u.items||[]}catch(u){console.error("Failed to fetch hall items:",u),p.value=[]}finally{k.value=!1}}function w(u){g.value=u,$()}function M(u){h("view-item",u)}function S(){h("back")}function I(u){const e=u*30%360,a=40+u*5%30,E=25+u*3%20,A=120+u*7%40;return{"--book-color":`hsl(${e}, ${a}%, ${E}%)`,"--book-height":`${A}px`,"--book-width":`${25+u*3%15}px`,animationDelay:`${u*.1}s`}}return G(()=>{$()}),W(()=>y.hall.id,()=>{g.value=0,$()}),(u,e)=>(s(),n("div",Mt,[e[11]||(e[11]=t("div",{class:"hall-background"},[t("div",{class:"bg-ceiling"}),t("div",{class:"bg-walls"}),t("div",{class:"bg-floor"})],-1)),t("div",Bt,[t("button",{class:"back-button",onClick:S},[e[2]||(e[2]=t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),t("polyline",{points:"12 19 5 12 12 5"})],-1)),R(" "+i(r(l)("virtualTour.backToEntrance")),1)]),t("div",Ht,[t("h1",Vt,i(v.hall.name),1),t("p",It,i(v.hall.nameEn),1)]),t("div",Lt,[t("span",St,i(p.value.length)+" "+i(r(l)("virtualTour.itemsInView")),1)])]),t("div",At,[(s(!0),n(B,null,H(c.value,(a,E)=>(s(),n("button",{key:a.id,class:V(["shelf-tab",{active:g.value===E}]),style:q({"--shelf-color":a.color}),onClick:A=>w(E)},[t("span",Ft,i(a.name),1),t("span",Pt,i(a.nameEn),1)],14,Dt))),128))]),t("div",zt,[k.value?(s(),n("div",Nt,[e[3]||(e[3]=t("div",{class:"spinner"},null,-1)),t("p",null,i(r(l)("virtualTour.loadingShelf")),1)])):(s(),n("div",qt,[t("div",{class:"shelf-header",style:q({borderColor:m.value.color})},[t("h2",Rt,i(m.value.name),1),t("span",Gt,i(p.value.length)+" "+i(r(l)("common.items")),1)],4),t("div",Kt,[t("div",jt,[(s(),n(B,null,H(2,a=>t("div",{class:"shelf-row",key:a},[e[5]||(e[5]=t("div",{class:"shelf-board"},null,-1)),t("div",Wt,[(s(!0),n(B,null,H(p.value.slice((a-1)*6,a*6),(E,A)=>(s(),n("button",{key:E.id,class:"book-item",style:q(I(A+(a-1)*6)),onMouseenter:_=>d.value=E,onMouseleave:e[0]||(e[0]=_=>d.value=null),onClick:_=>M(E)},[t("div",Ut,[t("span",Jt,i(E.title),1)]),e[4]||(e[4]=t("div",{class:"book-top"},null,-1))],44,Ot))),128))])])),64))]),p.value.length===0?(s(),n("div",Qt,[e[6]||(e[6]=t("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),t("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})],-1)),t("p",null,i(r(l)("virtualTour.emptyShelf")),1)])):f("",!0)]),D(P,{name:"slide-up"},{default:F(()=>[d.value?(s(),n("div",Yt,[t("div",Zt,[d.value.thumbnail?(s(),n("img",{key:0,src:d.value.thumbnail,alt:d.value.title},null,8,Xt)):(s(),n("img",te))]),t("div",ee,[t("h3",se,i(d.value.title),1),d.value.author?(s(),n("p",ie,i(d.value.author),1)):f("",!0),d.value.type?(s(),n("p",ne,i(d.value.type),1)):f("",!0),t("button",{class:"preview-btn",onClick:e[1]||(e[1]=a=>M(d.value))},[R(i(r(l)("virtualTour.viewDetails"))+" ",1),e[7]||(e[7]=t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1))])])])):f("",!0)]),_:1})]))]),t("div",oe,[t("h3",le,i(r(l)("virtualTour.aboutThisHall")),1),t("p",ae,i(r(l)(`virtualTour.hallDescription.${v.hall.collection}`)),1),t("div",re,[t("div",ce,[e[8]||(e[8]=t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),t("span",null,i(r(l)("virtualTour.searchInHall")),1)]),t("div",de,[e[9]||(e[9]=t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),t("span",null,i(r(l)("virtualTour.downloadAvailable")),1)]),t("div",ue,[e[10]||(e[10]=t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})],-1)),t("span",null,i(r(l)("virtualTour.previewFiles")),1)])])]),e[12]||(e[12]=t("div",{class:"hall-decorations"},[t("div",{class:"decoration-lamp lamp-left"}),t("div",{class:"decoration-lamp lamp-right"})],-1))]))}},he=z(ve,[["__scopeId","data-v-1e027f05"]]),me={class:"tour-mini-map"},pe={class:"map-header"},ye={class:"map-title"},ke={class:"map-container"},fe={class:"map-svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid meet"},ge=["x1","y1","x2","y2"],_e=["cx","cy"],we=["onClick","title"],be={class:"marker-label"},$e={class:"map-legend"},xe={class:"legend-item"},Ce={class:"legend-item"},Te={__name:"TourMiniMap",props:{locations:{type:Array,required:!0},currentLocation:{type:String,required:!0}},emits:["navigate","close"],setup(v,{emit:x}){const{t:l}=N(),T=v,y=x,h={entrance:{x:50,y:90},books:{x:20,y:50},theses:{x:50,y:30},periodicals:{x:80,y:50},manuscripts:{x:30,y:15},media:{x:70,y:15}},k=C(()=>T.locations.map(d=>({...d,position:h[d.id]||{x:50,y:50}}))),p=C(()=>h[T.currentLocation]||{x:50,y:90});function g(d){d!==T.currentLocation&&y("navigate",d)}return(d,o)=>(s(),n("div",me,[t("div",pe,[t("h3",ye,i(r(l)("virtualTour.map")),1),t("button",{class:"close-btn",onClick:o[0]||(o[0]=c=>d.$emit("close"))},[...o[1]||(o[1]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",ke,[(s(),n("svg",fe,[o[2]||(o[2]=t("rect",{x:"5",y:"5",width:"90",height:"90",rx:"2",fill:"none",stroke:"rgba(200, 164, 21, 0.3)","stroke-width":"0.5"},null,-1)),(s(!0),n(B,null,H(k.value.filter(c=>c.id!=="entrance"),c=>(s(),n("line",{key:`line-${c.id}`,x1:h.entrance.x,y1:h.entrance.y,x2:c.position.x,y2:c.position.y,stroke:"rgba(200, 164, 21, 0.2)","stroke-width":"0.5","stroke-dasharray":"2,2"},null,8,ge))),128)),t("circle",{cx:p.value.x,cy:p.value.y,r:"8",fill:"none",stroke:"rgba(200, 164, 21, 0.5)","stroke-width":"0.5",class:"pulse-ring"},null,8,_e)])),(s(!0),n(B,null,H(k.value,c=>(s(),n("button",{key:c.id,class:V(["map-marker",{active:v.currentLocation===c.id}]),style:q({left:`${c.position.x}%`,top:`${c.position.y}%`}),onClick:m=>g(c.id),title:c.name},[o[3]||(o[3]=t("span",{class:"marker-dot"},null,-1)),t("span",be,i(c.name),1)],14,we))),128))]),t("div",$e,[t("div",xe,[o[4]||(o[4]=t("span",{class:"legend-dot current"},null,-1)),t("span",null,i(r(l)("virtualTour.currentLocation")),1)]),t("div",Ce,[o[5]||(o[5]=t("span",{class:"legend-dot available"},null,-1)),t("span",null,i(r(l)("virtualTour.availableHalls")),1)])])]))}},Ee=z(Te,[["__scopeId","data-v-ca65d82f"]]),Me={class:"viewer-header"},Be={class:"header-info"},He={class:"item-title"},Ve={key:0,class:"item-author"},Ie={class:"header-actions"},Le=["title"],Se=["title"],Ae={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},De={key:1,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Fe=["title"],Pe={class:"viewer-tabs"},ze=["onClick"],Ne=["innerHTML"],qe={class:"tab-label"},Re={class:"viewer-content"},Ge={key:0,class:"tab-content details-content"},Ke={class:"details-grid"},je={class:"detail-thumbnail"},We=["src","alt"],Oe={key:1,src:K,alt:"KFNL",class:"default-thumbnail"},Ue={class:"detail-info"},Je={key:0,class:"info-row"},Qe={class:"info-label"},Ye={class:"info-value type-badge"},Ze={key:1,class:"info-row"},Xe={class:"info-label"},ts={class:"info-value"},es={key:2,class:"info-row"},ss={class:"info-label"},is={class:"info-value"},ns={key:3,class:"info-row"},os={class:"info-label"},ls={class:"info-value"},as={key:4,class:"info-row"},rs={class:"info-label"},cs={class:"info-value"},ds={key:5,class:"info-abstract"},us={class:"info-label"},vs={class:"abstract-text"},hs={key:0,class:"files-section"},ms={class:"section-title"},ps={class:"files-list"},ys={class:"file-info"},ks={class:"file-name"},fs={class:"file-size"},gs=["onClick"],_s={key:1,class:"tab-content pdf-content"},ws={key:2,class:"tab-content images-content"},bs={key:3,class:"tab-content video-content"},$s={key:4,class:"tab-content audio-content"},xs={class:"audio-player-container"},Cs={class:"audio-title"},Ts=["src"],Es={__name:"TourMediaViewer",props:{item:{type:Object,required:!0}},emits:["close"],setup(v,{emit:x}){const{t:l}=N(),T=O(),y=v,h=x,k=b("details"),p=b(!1),g=C(()=>y.item.files&&y.item.files.length>0),d=C(()=>g.value?y.item.files.filter(e=>e.mimeType==="application/pdf"):[]),o=C(()=>g.value?y.item.files.filter(e=>{var a;return(a=e.mimeType)==null?void 0:a.startsWith("image/")}):[]),c=C(()=>g.value?y.item.files.filter(e=>{var a;return(a=e.mimeType)==null?void 0:a.startsWith("video/")}):[]),m=C(()=>g.value?y.item.files.filter(e=>{var a;return(a=e.mimeType)==null?void 0:a.startsWith("audio/")}):[]),$=C(()=>{const e=[{id:"details",label:l("virtualTour.details"),icon:"info"}];return d.value.length>0&&e.push({id:"pdf",label:l("virtualTour.readPdf"),icon:"file"}),o.value.length>0&&e.push({id:"images",label:l("virtualTour.viewImages"),icon:"image"}),c.value.length>0&&e.push({id:"video",label:l("virtualTour.watchVideo"),icon:"video"}),m.value.length>0&&e.push({id:"audio",label:l("virtualTour.listenAudio"),icon:"audio"}),e}),w={info:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <circle cx="12" cy="12" r="10"/>
    <line x1="12" y1="16" x2="12" y2="12"/>
    <line x1="12" y1="8" x2="12.01" y2="8"/>
  </svg>`,file:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
    <polyline points="14 2 14 8 20 8"/>
    <line x1="16" y1="13" x2="8" y2="13"/>
    <line x1="16" y1="17" x2="8" y2="17"/>
    <polyline points="10 9 9 9 8 9"/>
  </svg>`,image:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
    <circle cx="8.5" cy="8.5" r="1.5"/>
    <polyline points="21 15 16 10 5 21"/>
  </svg>`,video:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <polygon points="5 3 19 12 5 21 5 3"/>
  </svg>`,audio:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <path d="M9 18V5l12-2v13"/>
    <circle cx="6" cy="18" r="3"/>
    <circle cx="18" cy="16" r="3"/>
  </svg>`};function M(){h("close")}function S(){T.push(`/item/${y.item.id}`),M()}function I(e){window.open(e.url,"_blank")}function u(e){e.key==="Escape"&&M()}return G(()=>{document.addEventListener("keydown",u),document.body.style.overflow="hidden"}),U(()=>{document.removeEventListener("keydown",u),document.body.style.overflow=""}),(e,a)=>{var E,A;return s(),n("div",{class:"tour-media-viewer",onClick:Q(M,["self"])},[t("div",{class:V(["viewer-container",{fullscreen:p.value}])},[t("div",Me,[t("div",Be,[t("h2",He,i(v.item.title),1),v.item.author?(s(),n("p",Ve,i(v.item.author),1)):f("",!0)]),t("div",Ie,[t("button",{class:"action-btn",onClick:S,title:r(l)("virtualTour.openInLibrary")},[...a[2]||(a[2]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),t("polyline",{points:"15 3 21 3 21 9"}),t("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1)])],8,Le),t("button",{class:"action-btn",onClick:a[0]||(a[0]=_=>p.value=!p.value),title:r(l)("common.fullscreen")},[p.value?(s(),n("svg",De,[...a[4]||(a[4]=[t("polyline",{points:"4 14 10 14 10 20"},null,-1),t("polyline",{points:"20 10 14 10 14 4"},null,-1),t("line",{x1:"14",y1:"10",x2:"21",y2:"3"},null,-1),t("line",{x1:"3",y1:"21",x2:"10",y2:"14"},null,-1)])])):(s(),n("svg",Ae,[...a[3]||(a[3]=[t("polyline",{points:"15 3 21 3 21 9"},null,-1),t("polyline",{points:"9 21 3 21 3 15"},null,-1),t("line",{x1:"21",y1:"3",x2:"14",y2:"10"},null,-1),t("line",{x1:"3",y1:"21",x2:"10",y2:"14"},null,-1)])]))],8,Se),t("button",{class:"action-btn close-btn",onClick:M,title:r(l)("common.close")},[...a[5]||(a[5]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Fe)])]),t("div",Pe,[(s(!0),n(B,null,H($.value,_=>(s(),n("button",{key:_.id,class:V(["tab-btn",{active:k.value===_.id}]),onClick:J=>k.value=_.id},[t("span",{class:"tab-icon",innerHTML:w[_.icon]},null,8,Ne),t("span",qe,i(_.label),1)],10,ze))),128))]),t("div",Re,[k.value==="details"?(s(),n("div",Ge,[t("div",Ke,[t("div",je,[v.item.thumbnail?(s(),n("img",{key:0,src:v.item.thumbnail,alt:v.item.title},null,8,We)):(s(),n("img",Oe))]),t("div",Ue,[v.item.type?(s(),n("div",Je,[t("span",Qe,i(r(l)("item.type")),1),t("span",Ye,i(v.item.type),1)])):f("",!0),v.item.date?(s(),n("div",Ze,[t("span",Xe,i(r(l)("item.date")),1),t("span",ts,i(v.item.date),1)])):f("",!0),v.item.collection?(s(),n("div",es,[t("span",ss,i(r(l)("item.collection")),1),t("span",is,i(v.item.collection),1)])):f("",!0),v.item.publisher?(s(),n("div",ns,[t("span",os,i(r(l)("item.publisher")),1),t("span",ls,i(v.item.publisher),1)])):f("",!0),v.item.language?(s(),n("div",as,[t("span",rs,i(r(l)("item.language")),1),t("span",cs,i(v.item.language),1)])):f("",!0),v.item.abstract?(s(),n("div",ds,[t("span",us,i(r(l)("item.abstract")),1),t("p",vs,i(v.item.abstract),1)])):f("",!0)])]),g.value?(s(),n("div",hs,[t("h3",ms,i(r(l)("item.files")),1),t("div",ps,[(s(!0),n(B,null,H(v.item.files,_=>(s(),n("div",{key:_.id,class:"file-item"},[a[7]||(a[7]=t("div",{class:"file-icon"},[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),t("polyline",{points:"14 2 14 8 20 8"})])],-1)),t("div",ys,[t("span",ks,i(_.name),1),t("span",fs,i(_.size),1)]),t("button",{class:"file-download",onClick:J=>I(_)},[...a[6]||(a[6]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)])],8,gs)]))),128))])])):f("",!0),t("button",{class:"view-full-btn",onClick:S},[R(i(r(l)("virtualTour.viewFullRecord"))+" ",1),a[8]||(a[8]=t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),t("polyline",{points:"12 5 19 12 12 19"})],-1))])])):k.value==="pdf"?(s(),n("div",_s,[d.value.length>0?(s(),L(X,{key:0,src:d.value[0].url,filename:d.value[0].name},null,8,["src","filename"])):f("",!0)])):k.value==="images"?(s(),n("div",ws,[o.value.length>0?(s(),L(tt,{key:0,images:o.value.map(_=>({src:_.url,name:_.name})),onDownload:I},null,8,["images"])):f("",!0)])):k.value==="video"?(s(),n("div",bs,[c.value.length>0?(s(),L(et,{key:0,src:c.value[0].url,title:c.value[0].name,mimeType:c.value[0].mimeType,onDownload:a[1]||(a[1]=_=>I(c.value[0]))},null,8,["src","title","mimeType"])):f("",!0)])):k.value==="audio"?(s(),n("div",$s,[t("div",xs,[a[9]||(a[9]=j('<div class="audio-icon" data-v-baea40c9><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-baea40c9><path d="M9 18V5l12-2v13" data-v-baea40c9></path><circle cx="6" cy="18" r="3" data-v-baea40c9></circle><circle cx="18" cy="16" r="3" data-v-baea40c9></circle></svg></div>',1)),t("h3",Cs,i((E=m.value[0])==null?void 0:E.name),1),t("audio",{controls:"",class:"audio-element",src:(A=m.value[0])==null?void 0:A.url},null,8,Ts)])])):f("",!0)])],2)])}}},Ms=z(Es,[["__scopeId","data-v-baea40c9"]]),Bs={class:"guide-header"},Hs={class:"guide-label"},Vs={class:"guide-actions"},Is={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ls={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ss={class:"guide-content"},As={class:"tip-card"},Ds={class:"tip-title"},Fs={class:"tip-title-en"},Ps={class:"tip-content"},zs={class:"tip-content-en"},Ns={key:0,class:"tip-navigation"},qs={class:"tip-dots"},Rs=["onClick"],Gs={key:0,class:"guide-extended"},Ks={class:"extended-title"},js={class:"tips-list"},Ws=["onClick"],Os={class:"tip-number"},Us={class:"tip-text"},Js={__name:"TourGuide",props:{location:{type:Object,required:!0}},emits:["close"],setup(v,{emit:x}){const{t:l}=N(),T=v,y=b(!1),h=b(0),k={entrance:[{title:"مرحباً بك",titleEn:"Welcome",content:"اختر إحدى القاعات لاستكشاف المحتوى الرقمي",contentEn:"Choose a hall to explore digital content"},{title:"التنقل",titleEn:"Navigation",content:"استخدم الخريطة المصغرة للتنقل السريع بين القاعات",contentEn:"Use the mini map for quick navigation between halls"},{title:"اختصارات لوحة المفاتيح",titleEn:"Keyboard Shortcuts",content:"M للخريطة، G للدليل، ESC للرجوع",contentEn:"M for map, G for guide, ESC to go back"}],books:[{title:"قاعة الكتب",titleEn:"Books Hall",content:"تضم مجموعة واسعة من الكتب في مختلف المجالات",contentEn:"Contains a wide collection of books in various fields"},{title:"التصفح",titleEn:"Browsing",content:"انقر على أي كتاب لعرض تفاصيله ومحتواه",contentEn:"Click any book to view its details and content"},{title:"الأقسام",titleEn:"Sections",content:"استخدم علامات التبويب للتنقل بين أقسام المكتبة",contentEn:"Use tabs to navigate between library sections"}],theses:[{title:"قاعة الرسائل الجامعية",titleEn:"Theses Hall",content:"رسائل الماجستير والدكتوراه من جامعات المملكة",contentEn:"Master and PhD theses from Saudi universities"},{title:"البحث المتقدم",titleEn:"Advanced Search",content:"يمكنك البحث حسب الجامعة أو التخصص أو السنة",contentEn:"Search by university, major, or year"}],periodicals:[{title:"قاعة الدوريات",titleEn:"Periodicals Hall",content:"المجلات العلمية والصحف والنشرات الدورية",contentEn:"Scientific journals, newspapers, and periodicals"},{title:"الأرشيف",titleEn:"Archive",content:"أعداد تاريخية تعود لعقود من الزمن",contentEn:"Historical issues dating back decades"}],manuscripts:[{title:"قاعة المخطوطات",titleEn:"Manuscripts Hall",content:"كنوز من المخطوطات الإسلامية والتاريخية النادرة",contentEn:"Treasures of rare Islamic and historical manuscripts"},{title:"المشاهدة عالية الدقة",titleEn:"High Resolution Viewing",content:"يمكنك تكبير الصور لرؤية تفاصيل الخط والزخارف",contentEn:"Zoom in to see calligraphy and decoration details"}],media:[{title:"قاعة الوسائط",titleEn:"Media Hall",content:"صور وخرائط وتسجيلات صوتية ومرئية",contentEn:"Images, maps, audio and video recordings"},{title:"التشغيل المباشر",titleEn:"Direct Playback",content:"استمع وشاهد المحتوى مباشرة داخل الجولة",contentEn:"Listen and watch content directly within the tour"}]},p=C(()=>k[T.location.id]||k.entrance),g=C(()=>p.value[h.value]);function d(){h.value=(h.value+1)%p.value.length}function o(){h.value=(h.value-1+p.value.length)%p.value.length}return W(()=>T.location.id,()=>{h.value=0}),(c,m)=>(s(),n("div",{class:V(["tour-guide",{expanded:y.value}])},[t("div",Bs,[m[5]||(m[5]=j('<div class="guide-avatar" data-v-b0320729><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-b0320729><circle cx="12" cy="12" r="10" data-v-b0320729></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" data-v-b0320729></path><line x1="12" y1="17" x2="12.01" y2="17" data-v-b0320729></line></svg></div>',1)),t("span",Hs,i(r(l)("virtualTour.guide")),1),t("div",Vs,[t("button",{class:"action-btn",onClick:m[0]||(m[0]=$=>y.value=!y.value)},[y.value?(s(),n("svg",Ls,[...m[3]||(m[3]=[t("polyline",{points:"6 9 12 15 18 9"},null,-1)])])):(s(),n("svg",Is,[...m[2]||(m[2]=[t("polyline",{points:"18 15 12 9 6 15"},null,-1)])]))]),t("button",{class:"action-btn close",onClick:m[1]||(m[1]=$=>c.$emit("close"))},[...m[4]||(m[4]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])])]),t("div",Ss,[t("div",As,[t("h4",Ds,i(g.value.title),1),t("p",Fs,i(g.value.titleEn),1),t("p",Ps,i(g.value.content),1),t("p",zs,i(g.value.contentEn),1)]),p.value.length>1?(s(),n("div",Ns,[t("button",{class:"nav-btn",onClick:o},[...m[6]||(m[6]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])]),t("div",qs,[(s(!0),n(B,null,H(p.value,($,w)=>(s(),n("span",{key:w,class:V(["dot",{active:w===h.value}]),onClick:M=>h.value=w},null,10,Rs))),128))]),t("button",{class:"nav-btn",onClick:d},[...m[7]||(m[7]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])])])):f("",!0)]),y.value?(s(),n("div",Gs,[t("h5",Ks,i(r(l)("virtualTour.allTips")),1),t("ul",js,[(s(!0),n(B,null,H(p.value,($,w)=>(s(),n("li",{key:w,class:V(["tip-item",{active:w===h.value}]),onClick:M=>h.value=w},[t("span",Os,i(w+1),1),t("span",Us,i($.title),1)],10,Ws))),128))])])):f("",!0)],2))}},Qs=z(Js,[["__scopeId","data-v-b0320729"]]),Ys={class:"virtual-tour"},Zs={key:0,class:"tour-loading"},Xs={class:"loading-content"},ti={class:"tour-content"},ei={key:0,class:"tour-controls"},si=["title"],ii=["title"],ni=["title"],oi={key:1,class:"tour-breadcrumb"},li={class:"breadcrumb-current"},ai={__name:"VirtualTourView",setup(v){const{t:x}=N(),l=Y(),T=O(),y=b("entrance"),h=b(!0),k=b(!0),p=b(!0),g=b(null),d=b(!1),o=[{id:"entrance",name:"المدخل الرئيسي",nameEn:"Main Entrance",icon:"door"},{id:"books",name:"قاعة الكتب",nameEn:"Books Hall",icon:"book",collection:"books"},{id:"theses",name:"قاعة الرسائل الجامعية",nameEn:"Theses Hall",icon:"graduation",collection:"theses"},{id:"periodicals",name:"قاعة الدوريات",nameEn:"Periodicals Hall",icon:"newspaper",collection:"periodicals"},{id:"manuscripts",name:"قاعة المخطوطات",nameEn:"Manuscripts Hall",icon:"scroll",collection:"manuscripts"},{id:"media",name:"قاعة الوسائط",nameEn:"Media Hall",icon:"video",collection:"media"}],c=C(()=>o.find(u=>u.id===y.value)||o[0]),m=C(()=>y.value==="entrance");function $(u){h.value=!0,y.value=u,T.replace({query:{hall:u}}),setTimeout(()=>{h.value=!1},800)}function w(){m.value||$("entrance")}function M(u){g.value=u,d.value=!0}function S(){d.value=!1,g.value=null}function I(u){if(d.value){u.key==="Escape"&&S();return}switch(u.key){case"Escape":m.value||w();break;case"m":case"M":k.value=!k.value;break;case"g":case"G":p.value=!p.value;break}}return G(()=>{document.addEventListener("keydown",I);const u=l.query.hall;u&&o.find(e=>e.id===u)&&(y.value=u),setTimeout(()=>{h.value=!1},1e3)}),U(()=>{document.removeEventListener("keydown",I)}),W(()=>l.query.hall,u=>{u&&u!==y.value&&$(u)}),(u,e)=>(s(),n("div",Ys,[D(P,{name:"fade"},{default:F(()=>[h.value?(s(),n("div",Zs,[t("div",Xs,[e[4]||(e[4]=t("img",{src:K,alt:"KFNL",class:"loading-logo"},null,-1)),e[5]||(e[5]=t("div",{class:"loading-spinner"},null,-1)),t("p",null,i(r(x)("virtualTour.loading")),1)])])):f("",!0)]),_:1}),t("div",ti,[D(P,{name:"slide-fade",mode:"out-in"},{default:F(()=>[m.value?(s(),L(Et,{key:0,locations:o.filter(a=>a.id!=="entrance"),onNavigate:$},null,8,["locations"])):(s(),L(he,{key:y.value,hall:c.value,onBack:w,onViewItem:M},null,8,["hall"]))]),_:1})]),D(P,{name:"slide-right"},{default:F(()=>[k.value&&!h.value?(s(),L(Ee,{key:0,locations:o,"current-location":y.value,onNavigate:$,onClose:e[0]||(e[0]=a=>k.value=!1)},null,8,["current-location"])):f("",!0)]),_:1}),D(P,{name:"slide-left"},{default:F(()=>[p.value&&!h.value?(s(),L(Qs,{key:0,location:c.value,onClose:e[1]||(e[1]=a=>p.value=!1)},null,8,["location"])):f("",!0)]),_:1}),h.value?f("",!0):(s(),n("div",ei,[t("button",{class:V(["control-btn",{active:k.value}]),onClick:e[2]||(e[2]=a=>k.value=!k.value),title:r(x)("virtualTour.toggleMap")},[...e[6]||(e[6]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),t("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),t("line",{x1:"16",y1:"6",x2:"16",y2:"22"})],-1)])],10,si),t("button",{class:V(["control-btn",{active:p.value}]),onClick:e[3]||(e[3]=a=>p.value=!p.value),title:r(x)("virtualTour.toggleGuide")},[...e[7]||(e[7]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),t("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)])],10,ii),m.value?f("",!0):(s(),n("button",{key:0,class:"control-btn back-btn",onClick:w,title:r(x)("virtualTour.backToEntrance")},[...e[8]||(e[8]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),t("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)])],8,ni))])),!h.value&&!m.value?(s(),n("div",oi,[t("button",{onClick:w,class:"breadcrumb-home"},[e[9]||(e[9]=t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"})],-1)),R(" "+i(r(x)("virtualTour.entrance")),1)]),e[10]||(e[10]=t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)),t("span",li,i(c.value.name),1)])):f("",!0),D(P,{name:"fade"},{default:F(()=>[d.value&&g.value?(s(),L(Ms,{key:0,item:g.value,onClose:S},null,8,["item"])):f("",!0)]),_:1})]))}},mi=z(ai,[["__scopeId","data-v-5aa37e6b"]]);export{mi as default};
